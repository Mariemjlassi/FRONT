<button pButton label="Ajouter un site" icon="pi pi-plus" class="p-mb-3" (click)="showAddSiteDialog()" severity="secondary"></button>

<p-table #dt [value]="sites" selectionMode="multiple" [(selection)]="selectedSites" [exportHeader]="'Sites Export'"
    [tableStyle]="{ 'min-width': '50rem' }">
    <ng-template #caption>
        <div class="text-end pb-4">
            <p-button icon="pi pi-external-link" label="Export" (click)="exportSites()" />

        </div>
    </ng-template>
    <!-- En-tête du tableau -->
    <ng-template #header>
        <tr>
            <th>code</th>
            <th>Nom du Site</th>
            <th>Actions</th> <!-- Colonne pour les actions -->
        </tr>
    </ng-template>

    <!-- Corps du tableau -->
    <ng-template #body let-site>
        <tr [pSelectableRow]="site">
            <td>{{ site.id }}</td>
            <td>{{ site.nom_site }}</td>
            <td class="flex gap-2">
                <button pButton icon="pi pi-pencil" class="p-button-text p-button-sm" (click)="editSite(site)"></button>
            <button pButton icon="pi pi-trash" class="p-button-text p-button-sm p-button-danger" (click)="archiveSite(site)"></button>
        
              

              </td>
              
        </tr>
    </ng-template>



</p-table>
<p-dialog header="Edit Site" [modal]="true" [(visible)]="visible"
    [style]="{ width: '30rem', height: '30rem', maxWidth: '50vw', maxHeight: '90vh' }">

    <div class="flex items-center gap-6 mb-6"> <!-- Espace entre l'écriture et l'input -->
        <label for="siteName" class="font-semibold w-24">Nom du Site</label>
        <input pInputText id="siteName" class="flex-auto" [(ngModel)]="selectedSite.nom_site" autocomplete="off" />
    </div>
    <p-multiselect [options]="directions" [(ngModel)]="selectedDirections" optionLabel="nom_direction"
        placeholder="Sélectionner les directions" [filter]="true" [showToggleAll]="false" display="chip"
        (onShow)="onDirectionsListShow()" (onHide)="onDirectionsListHide()">
    </p-multiselect>

    <p-multiselect [options]="postes" [(ngModel)]="selectedPostes" optionLabel="titre"
        placeholder="Sélectionner les postes" [filter]="true" [showToggleAll]="false" display="chip"
        >
    </p-multiselect>


    <div class="flex justify-end gap-4"> <!-- Espace entre les boutons -->
        <p-button label="Cancel" severity="secondary" (click)="visible = false" />
        <p-button label="Save" />
    </div>
</p-dialog>
<br>






<p-dialog header="Add New Site" [(visible)]="showDialog" [modal]="true"
    [style]="{ width: '30rem', height: '30rem', maxWidth: '50vw', maxHeight: '90vh' }" class="map-container"
    [ngStyle]="{'height': mapHeight}">

    <div class="flex items-center gap-6 mb-6">
        <label for="siteName" class="font-semibold w-24">Nom du Site</label>
        <input pInputText id="siteName" [(ngModel)]="newSite.nom_site" autocomplete="off" />
    </div>

    <!-- Multiselect Directions -->
   

   






    <div class="flex justify-end gap-4 mt-5">
        <p-button label="Cancel" severity="secondary" (click)="showDialog = false" />
        <p-button label="Save" (click)="addSite()" />
    </div>
</p-dialog>
